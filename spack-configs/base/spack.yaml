spack:
  view: false
  config:
    build_stage: /tmp/$user/spack/stage
    misc_cache: /tmp/$user/spack/misc_cache
    concretizer: clingo
    install_tree:
      root: /global/common/software/spackecp/perlmutter/base
      projections:
        all: "{architecture}/{compiler.name}-{compiler.version}/{name}-{version}"
  concretizer:    
    unify: false
  compilers:
    - compiler:
        spec: gcc@7.5.0
        paths:
          cc: /usr/bin/gcc
          cxx: /usr/bin/g++
          f77: /usr/bin/gfortran
          fc: /usr/bin/gfortran
        flags: {}
        operating_system: sles15
        target: any
        modules: []
  packages:
    all:
      compiler: [gcc@7.5.0]
    diffutils:
      buildable: false
      version: [3.6]
      externals:
      - spec: diffutils@3.6
        prefix: /usr
    libfabric:
      buildable: false
      variants: fabrics=sockets,tcp,udp,rxm
      externals:
      - spec: libfabric@1.15.2.0
        prefix: /opt/cray/libfabric/1.15.2.0
        modules: [libfabric/1.15.2.0]
    tar:
      version: [1.34]
      buildable: false
      externals:
      - spec: tar@1.30
        prefix: /usr
  modules:
    default:
      enable::
      - lmod
      roots:
        lmod: /global/common/software/spackecp/perlmutter/base/modules
      lmod:
        core_compilers:
        - 'gcc@7.5.0'
        hash_length: 0
        include: [gcc, nvhpc]
        exclude: ['%gcc@7.5.0']
        projections:
          all: '{name}/{version}'
        all:
          environment:
            set:
              '{name}_ROOT': '{prefix}'
              '{name}_VERSION': '{version}'
        nvhpc:
          environment:
            prepend_path:
              LD_LIBRARY_PATH: '{prefix}/Linux_x86_64/{version}/math_libs/lib'
              CPATH: '{prefix}/Linux_x86_64/{version}/math_libs/include'
  specs:
    - gcc@12.3.0
    - gcc@13.2.0
    - nvhpc@23.7 ~mpi
    - nvhpc@23.9 ~mpi